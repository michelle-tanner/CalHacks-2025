<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BuddyTalk - AI Companion Chat</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #14A3C7;
            --primary-light: #4BC9E3;
            --primary-dark: #0D7A9A;
            --secondary: #FF6B6B;
            --accent: #4CD97B;
            --yellow: #FFD166;
            --purple: #9B5DE5;
            --light: #FFFFFF;
            --dark: #2D3748;
            --text: #4A5568;
            --border-radius: 24px;
            --shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
            --gradient: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #F0F9FF 0%, #E6F7FF 100%);
            min-height: 100vh;
            overflow: hidden;
        }

        .app-container {
            width: 100vw;
            height: 100vh;
            background-color: white;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* Page 0: Welcome Screen */
        .page {
            display: none;
            flex-direction: column;
            height: 100%;
            width: 100%;
            overflow-y: auto;
        }

        .page.active {
            display: flex;
            animation: pageSlideIn 0.6s ease-out;
        }

        .welcome-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 30px;
            background: var(--gradient);
            color: white;
            position: relative;
            overflow-y: auto;
            height: 100%;
            min-height: 0;
        }

        .welcome-content {
            max-width: 900px;
            z-index: 2;
            position: relative;
            width: 100%;
            padding: 20px;
        }

        .welcome-logo {
            font-size: 4rem;
            margin-bottom: 20px;
            animation: logoFloat 4s ease-in-out infinite;
            filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.2));
        }

        .welcome-title {
            font-size: 2.5rem;
            margin-bottom: 15px;
            font-weight: 700;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.2);
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            margin-bottom: 30px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            opacity: 0.9;
            line-height: 1.6;
            font-weight: 400;
        }

        .welcome-features {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .feature {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 220px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 20px 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: var(--transition);
        }

        .feature:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.3);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .feature-icon {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            margin-bottom: 15px;
            animation: iconFloat 3s ease-in-out infinite;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .feature:nth-child(2) .feature-icon {
            animation-delay: 0.5s;
        }

        .feature:nth-child(3) .feature-icon {
            animation-delay: 1s;
        }

        .feature-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .feature-text {
            font-size: 0.9rem;
            opacity: 0.9;
            line-height: 1.4;
        }

        .welcome-btn {
            background: white;
            color: var(--primary);
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 20px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
            z-index: 1;
            letter-spacing: 0.5px;
        }

        .welcome-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 25px rgba(0, 0, 0, 0.2);
        }

        .welcome-btn:active {
            transform: translateY(1px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
        }

        /* Page 1: Character Selection */
        .header {
            text-align: center;
            padding: 25px 20px 15px;
            background: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .header h1 {
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1rem;
            color: var(--text);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .characters-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: linear-gradient(135deg, #F8FAFF 0%, #F0F4FF 100%);
        }

        .characters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .character-card {
            background: var(--light);
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
            border: 1px solid rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100%;
        }

        .character-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .character-card.selected {
            border: 3px solid var(--primary);
            background-color: rgba(20, 163, 199, 0.05);
        }

        .character-avatar {
            width: 140px;
            height: 140px;
            margin: 0 auto 15px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 70px;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .character-card:hover .character-avatar {
            transform: scale(1.05);
        }

        .character-name {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--dark);
        }

        .character-description {
            font-size: 0.95rem;
            color: var(--text);
            margin-bottom: 15px;
            line-height: 1.5;
            flex-grow: 1;
        }

        .select-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.95rem;
            box-shadow: 0 5px 15px rgba(20, 163, 199, 0.3);
        }

        .select-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(20, 163, 199, 0.4);
        }

        .continue-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            margin: 25px auto;
            display: block;
            box-shadow: 0 10px 25px rgba(20, 163, 199, 0.4);
            position: relative;
            overflow: hidden;
            letter-spacing: 0.5px;
        }

        .continue-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(20, 163, 199, 0.5);
        }

        .continue-btn:active {
            transform: translateY(1px);
            box-shadow: 0 5px 15px rgba(20, 163, 199, 0.3);
        }

        .continue-btn:disabled {
            background: #cccccc;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            cursor: not-allowed;
        }

        .continue-btn:disabled:hover {
            transform: none;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        /* Page 2: Chat Interface */
        .chat-header {
            background: var(--gradient);
            color: white;
            padding: 18px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .character-info {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-left: 50px; /* Space for back button */
        }

        .character-icon {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 26px;
            background: rgba(255, 255, 255, 0.2);
            animation: iconFloat 3s ease-in-out infinite;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .character-details h2 {
            font-size: 1.5rem;
            margin-bottom: 5px;
            font-weight: 700;
        }

        .character-details p {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .header-controls {
            display: flex;
            gap: 12px;
        }

        .btn-icon {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 18px;
            position: relative;
            overflow: hidden;
        }

        .btn-icon:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .call-btn {
            background: var(--accent);
            color: var(--dark);
        }

        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            background: linear-gradient(135deg, #F8FBFF 0%, #F0F4FF 100%);
            overflow: hidden;
        }

        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: inset 0 0 10px rgba(0,0,0,0.03);
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
        }

        .message {
            max-width: 75%;
            padding: 14px 18px;
            margin-bottom: 15px;
            border-radius: 20px;
            position: relative;
            animation: messageSlideIn 0.4s ease-out;
            line-height: 1.5;
        }

        .ai-message {
            background: linear-gradient(135deg, #F0F4FF 0%, #E8ECFF 100%);
            color: var(--dark);
            border-bottom-left-radius: 5px;
            align-self: flex-start;
            animation: aiMessageAppear 0.5s ease-out;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-left: 4px solid var(--primary);
        }

        .user-message {
            background: var(--gradient);
            color: white;
            border-bottom-right-radius: 5px;
            margin-left: auto;
            animation: userMessageAppear 0.5s ease-out;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-right: 4px solid var(--primary-light);
        }

        .message-time {
            font-size: 0.7rem;
            opacity: 0.7;
            margin-top: 6px;
            text-align: right;
        }

        .typing-indicator {
            display: inline-block;
            background: linear-gradient(135deg, #F0F4FF 0%, #E8ECFF 100%);
            padding: 14px 18px;
            border-radius: 20px;
            border-bottom-left-radius: 5px;
            margin-bottom: 15px;
            align-self: flex-start;
            animation: typingPulse 1.5s infinite;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-left: 4px solid var(--primary);
        }

        .typing-dots {
            display: flex;
        }

        .typing-dots span {
            height: 8px;
            width: 8px;
            background-color: var(--primary);
            border-radius: 50%;
            display: block;
            margin: 0 3px;
            opacity: 0.4;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dots span:nth-child(1) {
            animation-delay: 0s;
        }

        .typing-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }

        .input-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .message-input {
            flex: 1;
            padding: 14px 18px;
            border: 2px solid #e0e7ff;
            border-radius: 30px;
            font-size: 0.95rem;
            transition: var(--transition);
            background: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .message-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(20, 163, 199, 0.2);
        }

        .send-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient);
            color: white;
            border: none;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 18px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(20, 163, 199, 0.4);
        }

        .send-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 25px rgba(20, 163, 199, 0.5);
        }

        .back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            color: var(--primary);
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 10;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .back-btn:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
        }

        .back-btn:active {
            transform: translateY(1px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        /* Page 3: Voice Call Screen - FIXED FOR FIT */
        .call-screen {
            display: flex;
            flex-direction: column;
            height: 100%;
            background: var(--gradient);
            color: white;
            position: relative;
            animation: callScreenAppear 0.6s ease-out;
            overflow: hidden;
        }

        .call-header {
            padding: 20px;
            text-align: center;
            background: rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 2;
            flex-shrink: 0;
        }

        .call-character {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex: 1;
            padding: 20px;
            position: relative;
            z-index: 2;
            min-height: 0;
            overflow: hidden;
        }

        .full-character {
            width: 200px;
            height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 140px;
            margin-bottom: 20px;
            animation: characterFloat 4s ease-in-out infinite;
            filter: drop-shadow(0 15px 30px rgba(0, 0, 0, 0.3));
            position: relative;
        }

        .call-status {
            font-size: 1.2rem;
            margin-bottom: 10px;
            animation: statusPulse 2s infinite;
            font-weight: 600;
        }

        .call-timer {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 20px;
            animation: timerGlow 2s infinite alternate;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .call-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 2;
            flex-shrink: 0;
        }

        .call-btn-large {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 22px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .call-btn-large:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .end-call-btn {
            background: var(--secondary);
        }

        .voice-animation {
            display: flex;
            justify-content: center;
            gap: 4px;
            margin-top: 15px;
            height: 25px;
        }

        .voice-bar {
            width: 4px;
            height: 18px;
            background-color: white;
            border-radius: 2px;
            animation: voicePulse 1.5s infinite ease-in-out;
        }

        .voice-bar:nth-child(2) {
            animation-delay: 0.2s;
        }

        .voice-bar:nth-child(3) {
            animation-delay: 0.4s;
        }

        .voice-bar:nth-child(4) {
            animation-delay: 0.6s;
        }

        .voice-bar:nth-child(5) {
            animation-delay: 0.8s;
        }

        /* Animations */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        @keyframes characterFloat {
            0% { transform: translateY(0px) scale(1); }
            50% { transform: translateY(-10px) scale(1.05); }
            100% { transform: translateY(0px) scale(1); }
        }

        @keyframes logoFloat {
            0% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }

        @keyframes iconFloat {
            0% { transform: translateY(0); }
            50% { transform: translateY(-6px); }
            100% { transform: translateY(0); }
        }

        @keyframes typing {
            0% { opacity: 0.4; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); }
            100% { opacity: 0.4; transform: scale(0.8); }
        }

        @keyframes voicePulse {
            0% { height: 5px; }
            50% { height: 20px; }
            100% { height: 5px; }
        }

        @keyframes messageSlideIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes aiMessageAppear {
            0% { opacity: 0; transform: translateX(-15px) scale(0.9); }
            100% { opacity: 1; transform: translateX(0) scale(1); }
        }

        @keyframes userMessageAppear {
            0% { opacity: 0; transform: translateX(15px) scale(0.9); }
            100% { opacity: 1; transform: translateX(0) scale(1); }
        }

        @keyframes typingPulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }

        @keyframes pageSlideIn {
            from { opacity: 0; transform: translateX(40px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes callScreenAppear {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes statusPulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }

        @keyframes timerGlow {
            0% { text-shadow: 0 0 5px rgba(255, 255, 255, 0.5); }
            100% { text-shadow: 0 0 12px rgba(255, 255, 255, 0.8), 0 0 25px rgba(255, 255, 255, 0.4); }
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .welcome-subtitle {
                font-size: 1rem;
            }
            
            .welcome-features {
                flex-direction: column;
                gap: 15px;
            }
            
            .feature {
                max-width: 100%;
            }
            
            .characters-grid {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .character-avatar {
                width: 120px;
                height: 120px;
                font-size: 60px;
            }
            
            .full-character {
                width: 150px;
                height: 150px;
                font-size: 100px;
            }
            
            .back-btn {
                top: 15px;
                left: 15px;
                padding: 8px 16px;
            }
            
            .character-info {
                margin-left: 45px;
            }
        }

        @media (max-height: 700px) {
            .welcome-content {
                margin-top: 10px;
            }
            
            .welcome-logo {
                font-size: 3rem;
                margin-bottom: 15px;
            }
            
            .welcome-title {
                font-size: 2rem;
                margin-bottom: 10px;
            }
            
            .welcome-subtitle {
                font-size: 1rem;
                margin-bottom: 20px;
            }
            
            .welcome-features {
                margin: 20px 0;
            }
            
            .feature {
                padding: 15px 10px;
            }
            
            .feature-icon {
                width: 60px;
                height: 60px;
                font-size: 1.8rem;
                margin-bottom: 10px;
            }
            
            .full-character {
                width: 150px;
                height: 150px;
                font-size: 100px;
                margin-bottom: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Page 0: Welcome Screen -->
        <div class="page active" id="page0">
            <div class="welcome-screen">
                <div class="welcome-content">
                    <div class="welcome-logo">üí¨</div>
                    <h1 class="welcome-title">Welcome to BuddyTalk</h1>
                    <p class="welcome-subtitle">Connect with friendly AI companions designed to listen, understand, and support you through fun conversations.</p>
                    
                    <div class="welcome-features">
                        <div class="feature">
                            <div class="feature-icon">üó£Ô∏è</div>
                            <div class="feature-title">Voice & Text Chat</div>
                            <div class="feature-text">Talk or type with your AI friend anytime</div>
                        </div>
                        <div class="feature">
                            <div class="feature-icon">ü§ñ</div>
                            <div class="feature-title">Friendly AI Companions</div>
                            <div class="feature-text">Choose from fun characters who love to chat</div>
                        </div>
                        <div class="feature">
                            <div class="feature-icon">üé≠</div>
                            <div class="feature-title">Many Characters</div>
                            <div class="feature-text">Find the perfect buddy for your conversations</div>
                        </div>
                    </div>
                    
                    <button class="welcome-btn" id="welcomeBtn">Get Started</button>
                </div>
            </div>
        </div>
        
        <!-- Page 1: Character Selection -->
        <div class="page" id="page1">
            <div class="header">
                <h1>Choose Your Buddy</h1>
                <p>Select a friendly character to chat with</p>
            </div>
            
            <div class="characters-container">
                <div class="characters-grid">
                    <div class="character-card" data-character="owl">
                        <div class="character-avatar" style="background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%); color: #FFD700;">
                            ü¶â
                        </div>
                        <div class="character-name">Wise Oliver</div>
                        <div class="character-description">A thoughtful owl who offers great advice and loves deep conversations.</div>
                        <button class="select-btn">Select</button>
                    </div>
                    
                    <div class="character-card" data-character="rabbit">
                        <div class="character-avatar" style="background: linear-gradient(135deg, #FFB6C1 0%, #FFC0CB 100%); color: white;">
                            üê∞
                        </div>
                        <div class="character-name">Happy Hazel</div>
                        <div class="character-description">An energetic rabbit who brings positivity and cheer to every conversation.</div>
                        <button class="select-btn">Select</button>
                    </div>
                    
                    <div class="character-card" data-character="fox">
                        <div class="character-avatar" style="background: linear-gradient(135deg, #FF8C00 0%, #FFA500 100%); color: white;">
                            ü¶ä
                        </div>
                        <div class="character-name">Clever Felix</div>
                        <div class="character-description">A witty fox known for clever remarks and fun storytelling.</div>
                        <button class="select-btn">Select</button>
                    </div>
                    
                    <div class="character-card" data-character="bear">
                        <div class="character-avatar" style="background: linear-gradient(135deg, #8B7355 0%, #A0522D 100%); color: #FFD700;">
                            üêª
                        </div>
                        <div class="character-name">Cozy Bruno</div>
                        <div class="character-description">A comforting bear who creates a safe space for heartfelt conversations.</div>
                        <button class="select-btn">Select</button>
                    </div>
                    
                    <div class="character-card" data-character="penguin">
                        <div class="character-avatar" style="background: linear-gradient(135deg, #000 0%, #333 100%); color: white;">
                            üêß
                        </div>
                        <div class="character-name">Playful Pip</div>
                        <div class="character-description">A cheerful penguin who loves games, jokes, and keeping things fun.</div>
                        <button class="select-btn">Select</button>
                    </div>
                    
                    <div class="character-card" data-character="dolphin">
                        <div class="character-avatar" style="background: linear-gradient(135deg, #1E90FF 0%, #00BFFF 100%); color: white;">
                            üê¨
                        </div>
                        <div class="character-name">Friendly Finn</div>
                        <div class="character-description">An empathetic dolphin who listens well and offers kind advice.</div>
                        <button class="select-btn">Select</button>
                    </div>
                </div>
                
                <button class="continue-btn" id="continueBtn" disabled>Continue with Your Buddy</button>
            </div>
        </div>
        
        <!-- Page 2: Chat Interface -->
        <div class="page" id="page2">
            <button class="back-btn" id="backBtn">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            
            <div class="chat-header">
                <div class="character-info">
                    <div class="character-icon" id="selectedCharacterIcon">
                        ü¶â
                    </div>
                    <div class="character-details">
                        <h2 id="selectedCharacterName">Wise Oliver</h2>
                        <p>Online - Ready to chat</p>
                    </div>
                </div>
                <div class="header-controls">
                    <button class="btn-icon" id="settingsBtn">
                        <i class="fas fa-cog"></i>
                    </button>
                    <button class="btn-icon call-btn" id="callBtn">
                        <i class="fas fa-phone"></i>
                    </button>
                </div>
            </div>
            
            <div class="chat-container">
                <div class="messages-container" id="messagesContainer">
                    <div class="message ai-message">
                        Hello there! I'm so happy to chat with you today. How are you feeling?
                        <div class="message-time">10:02 AM</div>
                    </div>
                    
                    <div class="message user-message">
                        I'm doing pretty good! Just finished some homework.
                        <div class="message-time">10:03 AM</div>
                    </div>
                    
                    <div class="message ai-message">
                        That's awesome! Homework can be tough sometimes. What subject did you work on?
                        <div class="message-time">10:03 AM</div>
                    </div>
                </div>
                
                <div class="input-container">
                    <input type="text" class="message-input" id="messageInput" placeholder="Type your message here...">
                    <button class="send-btn" id="sendBtn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Page 3: Voice Call Screen -->
        <div class="page" id="page3">
            <div class="call-screen">
                <div class="call-header">
                    <h2>Call with <span id="callCharacterName">Wise Oliver</span></h2>
                </div>
                
                <div class="call-character">
                    <div class="full-character" id="fullCharacter">
                        ü¶â
                    </div>
                    <div class="call-status" id="callStatus">Connected</div>
                    <div class="call-timer" id="callTimer">00:45</div>
                    
                    <div class="voice-animation">
                        <div class="voice-bar"></div>
                        <div class="voice-bar"></div>
                        <div class="voice-bar"></div>
                        <div class="voice-bar"></div>
                        <div class="voice-bar"></div>
                    </div>
                </div>
                
                <div class="call-controls">
                    <button class="call-btn-large" id="muteBtn">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button class="call-btn-large end-call-btn" id="endCallBtn">
                        <i class="fas fa-phone-slash"></i>
                    </button>
                    <button class="call-btn-large" id="speakerBtn">
                        <i class="fas fa-volume-up"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const page0 = document.getElementById('page0');
        const page1 = document.getElementById('page1');
        const page2 = document.getElementById('page2');
        const page3 = document.getElementById('page3');
        const welcomeBtn = document.getElementById('welcomeBtn');
        const continueBtn = document.getElementById('continueBtn');
        const backBtn = document.getElementById('backBtn');
        const characterCards = document.querySelectorAll('.character-card');
        const selectedCharacterIcon = document.getElementById('selectedCharacterIcon');
        const selectedCharacterName = document.getElementById('selectedCharacterName');
        const callBtn = document.getElementById('callBtn');
        const messagesContainer = document.getElementById('messagesContainer');
        const messageInput = document.getElementById('messageInput');
        const sendBtn = document.getElementById('sendBtn');
        const callCharacterName = document.getElementById('callCharacterName');
        const fullCharacter = document.getElementById('fullCharacter');
        const callStatus = document.getElementById('callStatus');
        const callTimer = document.getElementById('callTimer');
        const endCallBtn = document.getElementById('endCallBtn');
        const muteBtn = document.getElementById('muteBtn');
        const speakerBtn = document.getElementById('speakerBtn');
        const settingsBtn = document.getElementById('settingsBtn');

        // Character data
        const characters = {
            owl: {
                name: "Wise Oliver",
                avatar: "ü¶â",
                color: "linear-gradient(135deg, #8B4513 0%, #A0522D 100%)",
                accentColor: "#FFD700"
            },
            rabbit: {
                name: "Happy Hazel",
                avatar: "üê∞",
                color: "linear-gradient(135deg, #FFB6C1 0%, #FFC0CB 100%)",
                accentColor: "white"
            },
            fox: {
                name: "Clever Felix",
                avatar: "ü¶ä",
                color: "linear-gradient(135deg, #FF8C00 0%, #FFA500 100%)",
                accentColor: "white"
            },
            bear: {
                name: "Cozy Bruno",
                avatar: "üêª",
                color: "linear-gradient(135deg, #8B7355 0%, #A0522D 100%)",
                accentColor: "#FFD700"
            },
            penguin: {
                name: "Playful Pip",
                avatar: "üêß",
                color: "linear-gradient(135deg, #000 0%, #333 100%)",
                accentColor: "white"
            },
            dolphin: {
                name: "Friendly Finn",
                avatar: "üê¨",
                color: "linear-gradient(135deg, #1E90FF 0%, #00BFFF 100%)",
                accentColor: "white"
            }
        };

        // App state
        let selectedCharacter = null;
        let callTime = 0;
        let callInterval;

        // Event Listeners
        welcomeBtn.addEventListener('click', goToCharacterSelection);
        continueBtn.addEventListener('click', goToChatPage);
        backBtn.addEventListener('click', goToSelectionPage);
        callBtn.addEventListener('click', startCall);
        sendBtn.addEventListener('click', sendMessage);
        messageInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        endCallBtn.addEventListener('click', endCall);
        muteBtn.addEventListener('click', toggleMute);
        speakerBtn.addEventListener('click', toggleSpeaker);
        settingsBtn.addEventListener('click', showSettings);

        // Add event listeners to character cards
        characterCards.forEach(card => {
            card.addEventListener('click', () => {
                // Remove selected class from all cards
                characterCards.forEach(c => c.classList.remove('selected'));
                
                // Add selected class to clicked card
                card.classList.add('selected');
                
                // Enable continue button
                continueBtn.disabled = false;
                
                // Store selected character
                selectedCharacter = card.getAttribute('data-character');
            });
        });

        // Functions
        function goToCharacterSelection() {
            page0.classList.remove('active');
            page1.classList.add('active');
        }

        function goToChatPage() {
            if (!selectedCharacter) return;
            
            // Update chat page with selected character
            const character = characters[selectedCharacter];
            selectedCharacterIcon.textContent = character.avatar;
            selectedCharacterIcon.style.background = character.color;
            selectedCharacterIcon.style.color = character.accentColor;
            selectedCharacterName.textContent = character.name;
            
            // Switch pages
            page1.classList.remove('active');
            page2.classList.add('active');
        }

        function goToSelectionPage() {
            page2.classList.remove('active');
            page1.classList.add('active');
            
            // Clear any active call
            if (callInterval) {
                clearInterval(callInterval);
                callInterval = null;
            }
        }

        function startCall() {
            if (!selectedCharacter) return;
            
            // Update call screen with selected character
            const character = characters[selectedCharacter];
            callCharacterName.textContent = character.name;
            fullCharacter.textContent = character.avatar;
            fullCharacter.style.color = character.accentColor;
            
            // Switch to call screen
            page2.classList.remove('active');
            page3.classList.add('active');
            
            // Start call timer
            callTime = 0;
            updateCallTimer();
            callInterval = setInterval(updateCallTimer, 1000);
            
            // Simulate AI talking after a moment
            setTimeout(() => {
                callStatus.textContent = "Talking...";
            }, 2000);
        }

        function updateCallTimer() {
            callTime++;
            const minutes = Math.floor(callTime / 60);
            const seconds = callTime % 60;
            callTimer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function endCall() {
            // Switch back to chat screen
            page3.classList.remove('active');
            page2.classList.add('active');
            
            // Stop call timer
            if (callInterval) {
                clearInterval(callInterval);
                callInterval = null;
            }
            
            // Add call ended message to chat
            addMessage('ai', 'That was a great conversation! Feel free to call me anytime you want to talk.');
        }

        function toggleMute() {
            const icon = muteBtn.querySelector('i');
            if (icon.classList.contains('fa-microphone')) {
                icon.classList.remove('fa-microphone');
                icon.classList.add('fa-microphone-slash');
                muteBtn.style.background = 'rgba(255, 255, 255, 0.4)';
            } else {
                icon.classList.remove('fa-microphone-slash');
                icon.classList.add('fa-microphone');
                muteBtn.style.background = 'rgba(255, 255, 255, 0.2)';
            }
        }

        function toggleSpeaker() {
            const icon = speakerBtn.querySelector('i');
            if (icon.classList.contains('fa-volume-up')) {
                icon.classList.remove('fa-volume-up');
                icon.classList.add('fa-volume-mute');
                speakerBtn.style.background = 'rgba(255, 255, 255, 0.4)';
            } else {
                icon.classList.remove('fa-volume-mute');
                icon.classList.add('fa-volume-up');
                speakerBtn.style.background = 'rgba(255, 255, 255, 0.2)';
            }
        }

        function sendMessage() {
            const message = messageInput.value.trim();
            if (message === '') return;
            
            // Add user message to chat
            addMessage('user', message);
            
            // Clear input
            messageInput.value = '';
            
            // Show typing indicator
            showTypingIndicator();
            
            // Simulate AI response after delay
            setTimeout(() => {
                hideTypingIndicator();
                const response = generateAIResponse(message);
                addMessage('ai', response);
            }, 1500);
        }

        function addMessage(sender, text) {
            // Create message element
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message');
            messageDiv.classList.add(sender === 'ai' ? 'ai-message' : 'user-message');
            
            // Add message content
            messageDiv.innerHTML = `
                ${text}
                <div class="message-time">${getCurrentTime()}</div>
            `;
            
            // Add to messages container
            messagesContainer.appendChild(messageDiv);
            
            // Scroll to bottom
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showTypingIndicator() {
            // Create typing indicator
            const typingDiv = document.createElement('div');
            typingDiv.classList.add('typing-indicator');
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div class="typing-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            `;
            
            // Add to messages container
            messagesContainer.appendChild(typingDiv);
            
            // Scroll to bottom
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        function generateAIResponse(userMessage) {
            // Simple response logic - in reality, this would be handled by your AI model
            const lowerMessage = userMessage.toLowerCase();
            
            if (lowerMessage.includes("name") && !lowerMessage.includes("your")) {
                return "Nice to meet you! How are you feeling today?";
            } else if (lowerMessage.includes("sad") || lowerMessage.includes("unhappy")) {
                return "I'm sorry to hear you're feeling sad. Can you tell me more about what's making you feel this way?";
            } else if (lowerMessage.includes("happy") || lowerMessage.includes("good")) {
                return "That's great to hear! What's making you feel happy today?";
            } else if (lowerMessage.includes("school") || lowerMessage.includes("teacher")) {
                return "Tell me about school. What's your favorite subject?";
            } else if (lowerMessage.includes("friend") || lowerMessage.includes("friends")) {
                return "Friends are important. How are things with your friends?";
            } else if (lowerMessage.includes("scared") || lowerMessage.includes("afraid")) {
                return "It's okay to feel scared sometimes. What's making you feel this way?";
            } else if (lowerMessage.includes("angry") || lowerMessage.includes("mad")) {
                return "I understand feeling angry. Can you tell me what happened?";
            } else {
                // Default responses to keep conversation flowing
                const responses = [
                    "That's interesting! Tell me more about that.",
                    "I see. How does that make you feel?",
                    "Thanks for sharing that with me. What else is on your mind?",
                    "I understand. Can you tell me more?",
                    "That sounds important. How long have you been feeling this way?"
                ];
                return responses[Math.floor(Math.random() * responses.length)];
            }
        }

        function getCurrentTime() {
            const now = new Date();
            return now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }

        function showSettings() {
            alert("Settings:\n\n- Notification preferences\n- Sound settings\n- Privacy options\n- Change character");
        }
    </script>
</body>
</html>